<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/css/payment.css">
    <title>QuickBite! - Payment</title>
</head>
<body>
    <div class="container">
        <h1>Payment Details</h1>
        <h3>Complete Your Payment</h3>
        
        <div class="order-total">
            <p>Total: <strong id="display-total">0 EGP</strong></p>
        </div>

        <div class="form-group">
            <select id="payment-method" onchange="togglePaymentMethod()">
                <option value="">-- Select Payment Method --</option>
                <option value="card">Visa / Mastercard</option>
            </select>
        </div>
        
        <div id="card-details" style="display: none;">
            <div class="form-group">
                <input type="text" id="cardholder-name" placeholder="Cardholder Name" oninput="this.value = this.value.replace(/[^a-zA-Z ]/g, '')">
                <div class="error-message" id="name-error"></div>
            </div>

            <div class="form-group">
                <input type="text" id="card-number" placeholder="Card Number" maxlength="19" oninput="formatCardNumber(this)" onkeypress="return isNumberKey(event)">
                <div class="error-message" id="number-error"></div>
            </div>

            <div class="form-group">
                <div class="expiry-container">
                    <input type="text" id="expiry-month" placeholder="MM" maxlength="2" onkeypress="return isNumberKey(event)">
                    <input type="text" id="expiry-year" placeholder="YY" maxlength="2" onkeypress="return isNumberKey(event)">
                </div>
                <div class="error-message" id="expiry-error"></div>
            </div>

            <div class="form-group">
                <div class="cvv-wrapper">
                    <input type="password" id="cvv" placeholder="CVV" maxlength="3" onkeypress="return isNumberKey(event)">
                    <span id="toggle-cvv" onclick="toggleCvvVisibility()">
                        <svg id="eye-open" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                        <svg id="eye-closed" style="display: none;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"></path><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"></path><line x1="2" x2="22" y1="2" y2="22"></line></svg>
                    </span>
                </div>
                <div class="error-message" id="cvv-error"></div>
            </div>

            <button onclick="processPayment()">Pay Now</button>
        </div>
        
        <p id="processing-message" class="message">Processing...</p>
        <p id="success-message" class="message">Payment Successful!</p>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Payment Confirmed!</h2>
            <p>Thank you, <strong id="popup-name"></strong>!</p>
            <p>You have successfully paid <strong id="popup-amount"></strong>.</p>
            <p>Date: <strong id="popup-date"></strong></p>
            <button class="close-button" onclick="closeModal()">Close</button>
        </div>
    </div>
</body>
<script src="../assets/js/payment.js"></script>
</html>
