<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Restaurants - QuickBite</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/dashboard.css">
</head>
<body>
    <!-- Background -->
    <div class="bg-container">
        <img src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
             alt="Restaurant Background" class="bg-img">
        <div class="bg-blur-overlay"></div>
    </div>

    <!-- Include Navigation Partial -->
    <%- include('partials/navigation') %>

    <!-- Wolt-style Header -->
    <header class="wolt-style-header">
        <div class="header-top">
            <!-- Logo placed before location selector -->
            <div class="header-brand">
                <img src="/images/logo.png" alt="QuickBit Logo" class="logo">
                <div class="location-selector">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Network - Select area</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
            
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search in QuickBit...">
            </div>
            
            <div class="auth-buttons">
                <% if (typeof user !== 'undefined' && user) { %>
                    <button class="login-btn" onclick="window.location.href='/account'">Account</button>
                    <button class="signup-btn" onclick="AuthAPI.logout()">Logout</button>
                <% } else { %>
                    <button class="login-btn" onclick="window.location.href='/Login'">Log in</button>
                    <button class="signup-btn" onclick="window.location.href='/Login'">Sign up</button>
                <% } %>
            </div>
        </div>
        
        <nav class="header-nav" aria-label="Main navigation">
            <a href="/dashboard" class="nav-item active"><i class="fas fa-compass"></i> Discovery</a>
            <a href="/Restaurant" class="nav-item"><i class="fas fa-utensils"></i> Restaurants</a>
            <a href="#" class="nav-item"><i class="fas fa-store"></i> Stores</a>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="dashboard-main">
        <% if (typeof user !== 'undefined' && user && user.role === 'admin') { %>
        <div class="dashboard-actions">
            <button class="add-btn"><i class="fas fa-plus"></i> Add Restaurant</button>
            <button class="orders-btn" onclick="window.location.href='/orders'"><i class="fas fa-receipt"></i> View Orders</button>
        </div>
        <% } %>
        
        <h2 class="dashboard-section-title">
            <% if (typeof user !== 'undefined' && user) { %>
                Welcome <%= user.name %>, Campus Restaurants
            <% } else { %>
                Campus Restaurants
            <% } %>
        </h2>
        
        <div class="restaurants-grid">
            <% if (typeof restaurants !== 'undefined' && restaurants && restaurants.length > 0) { %>
                <% restaurants.forEach(restaurant => { %>
                    <div class="restaurant-card">
                        <div class="logo-container">
                            <img src="<%= restaurant.logo || 'https://via.placeholder.com/150' %>" 
                                 alt="<%= restaurant.name %> Logo" 
                                 class="restaurant-logo"
                                 onerror="this.src='https://via.placeholder.com/150'">
                        </div>
                        <div class="restaurant-info">
                            <h2><%= restaurant.name %></h2>
                            <div class="status-badge" data-status="<%= restaurant.status || 'open' %>">
                                <% if (restaurant.status === 'open' || !restaurant.status) { %>
                                    <i class="fas fa-check-circle"></i>
                                    Open
                                <% } else { %>
                                    <i class="fas fa-clock"></i>
                                    Closed
                                <% } %>
                            </div>
                            <p class="description"><%= restaurant.description || 'Delicious food awaits you!' %></p>
                            <div class="card-footer">
                                <div class="rating">
                                    <i class="fas fa-star"></i>
                                    <span class="rating-number"><%= restaurant.rating || '4.5' %></span>
                                    <span class="review-count">(<%= restaurant.reviewCount || '0' %> reviews)</span>
                                </div>
                                <button class="menu-btn" onclick="window.location.href='/<%= restaurant.slug || restaurant.name %>'">View Menu</button>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <!-- Default restaurants when no data is available -->
                <div class="restaurant-card">
                    <div class="logo-container">
                        <img src="https://as2.ftcdn.net/jpg/04/96/17/25/1000_F_496172567_mdRzKShupyVNevwDeRzhVPj03xHDNhIk.jpg" 
                             alt="Gyros Logo" 
                             class="restaurant-logo"
                             onerror="this.src='https://via.placeholder.com/150'">
                    </div>
                    <div class="restaurant-info">
                        <h2>Gyros</h2>
                        <div class="status-badge" data-status="open">
                            <i class="fas fa-check-circle"></i>
                            Open
                        </div>
                        <p class="description">Savor authentic Greek gyros and wholesome Mediterranean dishes—made fresh,
                                               packed with flavor, and perfect for a healthy lifestyle</p>
                        <div class="card-footer">
                            <div class="rating">
                                <i class="fas fa-star"></i>
                                <span class="rating-number">4.8</span>
                                <span class="review-count">(180 reviews)</span>
                            </div>
                            <button class="menu-btn" onclick="window.location.href='/Gyros'">View Menu</button>
                        </div>
                    </div>
                </div>

                <div class="restaurant-card">
                    <div class="logo-container">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSSyBpslNZoFBbL53QVtyDdoNAVRylmIwIrrA&s" 
                             alt="MY Corner Logo" 
                             class="restaurant-logo"
                             onerror="this.src='https://via.placeholder.com/150'">
                    </div>
                    <div class="restaurant-info">
                        <h2>MY Corner</h2>
                        <div class="status-badge" data-status="open">
                            <i class="fas fa-check-circle"></i>
                            Open
                        </div>
                        <p class="description">Golden falafel, warm foul, and fresh bread—Egyptian classics 
                                               served with a modern twist at My Corner</p>
                        <div class="card-footer">
                            <div class="rating">
                                <i class="fas fa-star"></i>
                                <span class="rating-number">4.7</span>
                                <span class="review-count">(150 reviews)</span>
                            </div>
                            <button class="menu-btn" onclick="window.location.href='/MyCorner'">View Menu</button>
                        </div>
                    </div>
                </div>

                <div class="restaurant-card">
                    <div class="logo-container">
                        <img src="https://dynamic-media-cdn.tripadvisor.com/media/photo-o/15/15/d3/50/cinnabon-logo.jpg?w=900&h=-1&s=1" 
                             alt="Cinnabon Logo" 
                             class="restaurant-logo"
                             loading="lazy"
                             onerror="this.src='https://via.placeholder.com/150'">
                    </div>
                    <div class="restaurant-info">
                        <h2>Cinnabon</h2>
                        <div class="status-badge" data-status="open">
                            <i class="fas fa-clock"></i>
                            Open Now
                        </div>
                        <p class="description">
                            Fresh-baked cinnamon rolls, classic bites, and refreshing beverages. 
                            Enjoy the irresistible aroma and taste of our world-famous cinnamon rolls at MIU campus.
                        </p>
                        <div class="card-footer">
                            <div class="rating">
                                <i class="fas fa-star"></i>
                                <span class="rating-number">4.8</span>
                                <span class="review-count">(320 reviews)</span>
                            </div>
                            <button class="menu-btn" onclick="window.location.href='/Cinnabon'">View Menu</button>
                        </div>
                    </div>
                </div>
            <% } %>
        </div>
    </main>

    <!-- Include Footer Partial -->
    <%- include('partials/footer') %>

    <!-- Bolt-Style Footer -->
    <footer class="bolt-footer">
        <div class="footer-container">
            <div class="footer-sections">
                <!-- QuickBit Section -->
                <div class="footer-section">
                    <div class="language-selector">
                        <span>EN</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <h3 class="footer-heading">QuickBit</h3>
                    <ul class="footer-links">
                        <li><a href="#/rules">Campus Rules</a></li>
                        <li><a href="#/delivery">Campus Food Delivery</a></li>
                        <li><a href="#/schedule">Delivery Schedule</a></li>
                        <li><a href="#/group-orders">Student Group Orders</a></li>
                        <li><a href="#/business">Campus Business</a></li>
                        <li><a href="#/campus-map">Campus Map</a></li>
                    </ul>
                </div>

                <!-- Partner Section -->
                <div class="footer-section">
                    <h3 class="footer-heading">Partner with Us</h3>
                    <ul class="footer-links">
                        <li><a href="#/partner/restaurant">Open a Restaurant</a></li>
                        <li><a href="#/partner/courier">Become a Courier</a></li>
                        <li><a href="#/partner/vendor">Campus Vendor Program</a></li>
                        <li><a href="#/partner/campus">Campus Partnership</a></li>
                    </ul>
                </div>

                <!-- Support Section -->
                <div class="footer-section">
                    <h3 class="footer-heading">Support</h3>
                    <ul class="footer-links">
                        <li><a href="#/help">Help Center</a></li>
                        <li><a href="#/faq">FAQs</a></li>
                        <li><a href="/contact">Contact Us</a></li>
                        <li><a href="#/feedback">Feedback</a></li>
                    </ul>
                </div>

                <!-- Company Section -->
                <div class="footer-section">
                    <h3 class="footer-heading">Company</h3>
                    <ul class="footer-links">
                        <li><a href="/about us">About QuickBit</a></li>
                        <li><a href="#/careers">Campus Jobs</a></li>
                        <li><a href="#/sustainability">Sustainability</a></li>
                        <li><a href="#/blog">Campus Blog</a></li>
                        <li><a href="#/news">News</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-apps">
                <div class="app-buttons">
                    <a href="quickbit/app-store" class="app-download">
                        <i class="fab fa-apple"></i>
                        <div>
                            <span>Get on</span>
                            <strong>App Store</strong>
                        </div>
                    </a>
                    <a href="quickbit/google-play" class="app-download">
                        <i class="fab fa-google-play"></i>
                        <div>
                            <span>Get on</span>
                            <strong>Google Play</strong>
                        </div>
                    </a>
                </div>
                <div class="social-links">
                    <a href="quickbit/twitter" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="quickbit/facebook" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="quickbit/instagram" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="quickbit/linkedin" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="copyright">© 2024 QuickBit - MIU Campus Food Delivery</div>
            <div class="legal-links">
                <a href="#/terms">Terms & Conditions</a>
                <a href="#/privacy">Privacy Policy</a>
                <a href="#/cookies">Cookie Policy</a>
                <a href="#/accessibility">Accessibility</a>
            </div>
        </div>
    </footer>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-info-circle"></i>
        <span id="notification-message"></span>
    </div>

    <!-- Scripts -->
    <script src="/js/dashboard.js"></script>
    <script src="/js/api.js"></script>
    
    <% if (typeof user !== 'undefined' && user) { %>
    <script>
        window.currentUser = {
            id: '<%= user._id %>',
            name: '<%= user.name %>',
            email: '<%= user.email %>',
            role: '<%= user.role %>'
        };
    </script>
    <% } %>
</body>
</html>